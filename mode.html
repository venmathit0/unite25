<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Confirmation</title>
  <style>
    body { background: #121212; color: white; font-family: 'Segoe UI', sans-serif;}
    .container { max-width: 420px; margin: 60px auto; padding: 36px; background: #1f1f1f; border-radius: 15px;}
    .section { margin: 28px 0;}
    label { display: block; margin-bottom: 8px; font-weight: 600;}
    input[type="file"] { background: #2b2b2b; color: white;}
    .btn { background: linear-gradient(90deg, #ff6a00, #ee0979); color: white; border: none; padding: 14px 35px; border-radius: 25px; font-size: 1.1rem; font-weight: bold; cursor: pointer;}
  </style>
</head>
<body>
  <div class="container">
    <h2 style="text-align: center; margin-bottom: 30px;">Payment Confirmation</h2>
    <form id="paymentConfirmationForm" enctype="multipart/form-data">
      <div class="section">
        <label>Payment Mode:</label>
        <label><input type="radio" name="paymentMode" value="online" onclick="toggleFields()" required> Online</label>
        <label><input type="radio" name="paymentMode" value="offline" onclick="toggleFields()"> Offline</label>
      </div>

      <div id="onlineFields" class="section" style="display:none;">
        <label for="txnId">Transaction ID:</label>
        <input type="text" id="txnId" name="txnId" placeholder="Enter Transaction ID" />
        <label for="txnScreenshot">Upload Payment Screenshot:</label>
        <input type="file" id="txnScreenshot" name="txnScreenshot" accept="image/*" />
      </div>

      <div id="offlineFields" class="section" style="display:none;">
        <label for="receiptPhoto">Upload Receipt Photo:</label>
        <input type="file" id="receiptPhoto" name="receiptPhoto" accept="image/*" />
      </div>

      <button type="submit" class="btn">Complete Registration</button>
    </form>
  </div>

  <script>
    function toggleFields() {
      const onlineSelected = document.querySelector('input[name="paymentMode"]:checked').value === "online";
      document.getElementById('onlineFields').style.display = onlineSelected ? "block" : "none";
      document.getElementById('offlineFields').style.display = onlineSelected ? "none" : "block";
      document.getElementById('txnId').required = onlineSelected;
      document.getElementById('txnScreenshot').required = onlineSelected;
      document.getElementById('receiptPhoto').required = !onlineSelected;
    }

    document.getElementById('paymentConfirmationForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const paymentMode = document.querySelector('input[name="paymentMode"]:checked').value;
      localStorage.setItem("paymentMode", paymentMode);

      if (paymentMode === "online") {
        localStorage.setItem("txnId", document.getElementById("txnId").value);

        const file = document.getElementById("txnScreenshot").files[0];
        if (file) {
          localStorage.setItem("payment_proof_name", file.name);
          localStorage.setItem("payment_proof_type", file.type);
          const reader = new FileReader();
          reader.onload = function(evt) {
            localStorage.setItem("payment_proof", evt.target.result); // base64
            window.location.href = "final.html";
          };
          reader.readAsDataURL(file);
          return;
        }
      } else {
        const file = document.getElementById("receiptPhoto").files[0];
        if (file) {
          localStorage.setItem("payment_proof_name", file.name);
          localStorage.setItem("payment_proof_type", file.type);
          const reader = new FileReader();
          reader.onload = function(evt) {
            localStorage.setItem("payment_proof", evt.target.result);
            window.location.href = "final.html";
          };
          reader.readAsDataURL(file);
          return;
        }
      }

      window.location.href = "final.html";
    });
  </script>
</body>
</html>
